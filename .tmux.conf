set -g default-command "$SHELL -l"
set -g default-terminal tmux-256color
set -ga terminal-overrides ",*256col*:Tc"
set -g mouse on
set -g renumber-windows on
set -g set-titles on
set -g display-time 2500
set -g history-limit 10000
set -sg escape-time 0
set -wg aggressive-resize on
set -wg allow-rename on
set -wg mode-keys vi

set -g prefix C-a
unbind C-b
bind C-a send-prefix

bind C-h split-window -h
bind C-v split-window -v
bind C-s command-prompt -p "split h/v:" "split-window -%%"
bind S command-prompt -p "new window shell:" "new-window %%"

%if #{!=:$WSL_DISTRO_NAME$WSLENV,}
  bind C-c new-window pwsh.exe -wd '~'
  bind C-M-h split-window -h pwsh.exe -wd '~'
  bind C-M-v split-window -v pwsh.exe -wd '~'
  bind C-d command-prompt -p "split h/v:" "split-window -%% pwsh.exe -wd '~'"

  unbind -T copy-mode-vi Enter
  unbind -T copy-mode-vi MouseDragEnd1Pane
  bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "win32yank.exe -i"
  # bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "win32yank.exe -i"
  unbind-key -T prefix P
  bind-key P run "win32yank.exe -o | tmux load-buffer - && tmux paste-buffer"
%endif

bind C-l refresh-client
bind C-n command-prompt -p "rename:" "rename-window %%"

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Make panes equal size
bind = select-layout -E

bind -n M-H resize-pane -L 5
bind -n M-J resize-pane -D 5
bind -n M-K resize-pane -U 5
bind -n M-L resize-pane -R 5

bind -n C-S-Left swap-window -d -t -1
bind -n C-S-Right swap-window -d -t +1

bind H move-pane -h -s -
bind J move-pane -b -v -s +
bind K move-pane -v -s -
bind L move-pane -b -h -s +

bind m command-prompt -p "move window to:" "swap-window -t '%%'"

bind r source ~/.tmux.conf \; display-message "Reloaded .tmux.conf"

set -g status-style "bg=#242d3a fg=#d0d0e0"
set -g window-status-current-style "bg=#7285a3 fg=#101000"
set -g message-style "bg=#f0b060 fg=#002048"

set -g status-left '#{?client_prefix,#[bg=#345a4d][^A],#{?pane_in_mode,#[bg=#905830][Mo],#[fg=#7285a3][  ]}}#[default] '
set -g status-right ' #[fg=#7285a3]#(whoami)@#h [#{?session_many_attached,#{session_attached}#[default]:#[fg=#7285a3],}#S]'
